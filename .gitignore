ูุงูโูุง ูพุงุชูู ู ุฌูฺฏู

*.pyc
pycache/
db.sqlite3
.env

ูุญุท ูุฌุงุฒ

venv/
env/
.venv/

ูุงูโูุง ุงุณุชุงุชฺฉ ู ูุฏุง

staticfiles/
media/


ฒ. **ุงุฌุงุฏ ูุฎุฒู ู ฺฉุงูุช ฺฉุฑุฏู:**
ุชุฑููุงู ุฑุง ุจุงุฒ ฺฉูุฏ ู ุฏุณุชูุฑุงุช ุฒุฑ ุฑุง ุจุฒูุฏ:

```bash
git init
git add .
git commit -m "Initial commit - Final News Project"


ณ. ุขูพููุฏ ุฏุฑ GitHub ุง GitLab:

ุฏุฑ ุณุงุช GitHub.com ฺฉ Repository ุฌุฏุฏ ุจุณุงุฒุฏ.

ููฺฉ ูุฎุฒู ุฑุง ฺฉูพ ฺฉูุฏ ู ุฏุณุชูุฑุงุช ุฒุฑ ุฑุง ุจุฒูุฏ:

git branch -M main
git remote add origin <LINK_REPOSITORY_SHOMA>
git push -u origin main


ุญุงูุง ูพุฑูฺู ุดูุง ุงูู ุงุณุช ู ูุณุฎู ุงูู ุขู ุฑู ุงูุชุฑูุช ุฐุฎุฑู ุดุฏู.

ูุฑุญูู ฒ: ุขูุงุฏูโุณุงุฒ ูพุฑูฺู ุจุฑุง ุณุฑูุฑ ๐๏ธ

ูุจู ุงุฒ ุฑูุชู ุจู ุณุฑูุฑุ ุจุงุฏ ฺูุฏ ุชุบุฑ ฺฉูฺฺฉ ุจุฏูู.

ฑ. ูุตุจ Gunicorn:
ูุจโุณุฑูุฑ ุฌูฺฏู (runserver) ููุท ุจุฑุง ุชุณุช ุงุณุช. ุจุฑุง ุณุฑูุฑ ูุงูุน ุจู gunicorn ูุงุฒ ุฏุงุฑู.

pip install gunicorn
pip freeze > requirements.txt


ฒ. ุชูุธูุงุช ุงููุช (settings.py):
ููุช ูพุฑูฺู ุฑู ุณุฑูุฑ ูโุฑูุฏุ ุจุงุฏ DEBUG ุฎุงููุด ุดูุฏ. ุงูุง ูุนูุงู ุจุฑุง ุณุงุฏฺฏ ฺฉุงุฑุ ูโุชูุงูุฏ ุงู ฺฉุงุฑ ุฑุง ุฑู ุฎูุฏ ุณุฑูุฑ ุงูุฌุงู ุฏูุฏ. ููุท ูุทูุฆู ุดูุฏ ALLOWED_HOSTS ุฑุง ุชูุธู ฺฉุฑุฏูโุงุฏ.

ุฏุฑ settings.py:

ALLOWED_HOSTS = ['*'] # ุจุนุฏุงู ุงูุฌุง IP ุณุฑูุฑ ุง ุฏุงููู ุณุงุช ุฑุง ูโููุณู


ูุฑุญูู ณ: ุฎุฑุฏ ู ุชูุธู ุณุฑูุฑ (VPS) โ๏ธ

ุดูุง ูุงุฒ ุจู ฺฉ ุณุฑูุฑ ูุฌุงุฒ (VPS) ุจุง ุณุณุชู ุนุงูู Ubuntu 22.04 ุฏุงุฑุฏ. (ูโุชูุงูุฏ ุงุฒ ุดุฑฺฉุชโูุง ุงุฑุงู ูุซู ูพุงุฑุณโูพฺฉุ ุขุฑูุงู ุง ูุงุฑุง ุง ุฎุงุฑุฌ ูุซู Hetzner ุชูู ฺฉูุฏ).

ุจุนุฏ ุงุฒ ุฎุฑุฏุ ฺฉ IPุ ูุงู ฺฉุงุฑุจุฑ (root) ู ุฑูุฒ ุนุจูุฑ ุจู ุดูุง ูโุฏููุฏ.

ฑ. ุงุชุตุงู ุจู ุณุฑูุฑ:
ุชุฑููุงู (CMD ุง PowerShell) ุฑุง ุจุงุฒ ฺฉูุฏ ู ุฏุณุชูุฑ ุฒุฑ ุฑุง ุจุฒูุฏ:

ssh root@YOUR_SERVER_IP
# ุฑูุฒ ุนุจูุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ (ุชุงูพ ฺฉู ูโฺฉูุฏ ุฏุฏู ููโุดูุฏ)


ฒ. ุขูพุฏุช ฺฉุฑุฏู ุณุฑูุฑ:

sudo apt update
sudo apt upgrade -y


ณ. ูุตุจ ูพุดโูุงุฒูุง (ูพุงุชููุ ุฏุชุงุจุณ ู ูุจโุณุฑูุฑ):

sudo apt install python3-pip python3-venv nginx curl git -y


ูุฑุญูู ด: ุขูุฑุฏู ูพุฑูฺู ุฑู ุณุฑูุฑ (Deployment) ๐

ุญุงูุง ฺฉุงุฑูุง ฺฉู ุฑู ุณุณุชู ุฎูุฏุชุงู ฺฉุฑุฏุฏ ุฑุง ุงูุฌุง ุชฺฉุฑุงุฑ ูโฺฉูู.

ฑ. ฺฉููู ฺฉุฑุฏู ูพุฑูฺู ุงุฒ ฺฏุชโูุงุจ:

cd /var/www/
git clone <LINK_REPOSITORY_SHOMA> news_project
cd news_project


ฒ. ุณุงุฎุช ูุญุท ูุฌุงุฒ ู ูุตุจ ูพฺฉุฌโูุง:

python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt


ณ. ุชูุธูุงุช ููุง:

python manage.py migrate
python manage.py collectstatic


ูุฑุญูู ต: ุชูุธู Nginx ู Gunicorn (ุงุชุตุงู ุจู ุงูุชุฑูุช) ๐

ุงู ุณุฎุชโุชุฑู ุจุฎุด ุงุณุชุ ุงูุง ููุท ฺฉูพ/ูพุณุช ฺฉูุฏ ุฏุฑุณุช ูโุดูุฏ.

ฑ. ุณุงุฎุช ูุงู ุณุฑูุณ Gunicorn:
ุงู ุจุงุนุซ ูโุดูุฏ ุงฺฏุฑ ุณุฑูุฑ ุฎุงููุด ุดุฏุ ุณุงุช ุฎูุฏฺฉุงุฑ ุฑูุดู ุดูุฏ.

sudo nano /etc/systemd/system/gunicorn.service


ฺฉุฏ ุฒุฑ ุฑุง ุฏุงุฎูุด ฺฉูพ ฺฉูุฏ (ุจู ุฌุง root ูุงู ฺฉุงุฑุจุฑ ุณุฑูุฑ ู ูุณุฑูุง ุฑุง ฺฺฉ ฺฉูุฏ):

[Unit]
Description=gunicorn daemon
After=network.target

[Service]
User=root
Group=www-data
WorkingDirectory=/var/www/news_project
ExecStart=/var/www/news_project/venv/bin/gunicorn --access-logfile - --workers 3 --bind unix:/var/www/news_project/news_project.sock news_project.wsgi:application

[Install]
WantedBy=multi-user.target


ูุงู ุฑุง ุจุง Ctrl+X ุณูพุณ Y ู Enter ุฐุฎุฑู ฺฉูุฏ.

ุณุฑูุณ ุฑุง ุฑูุดู ฺฉูุฏ:

sudo systemctl start gunicorn
sudo systemctl enable gunicorn


ฒ. ุชูุธู Nginx (ุฏุฑูุงุฒู ูุฑูุฏ ุณุงุช):

sudo nano /etc/nginx/sites-available/news_project


ฺฉุฏ ุฒุฑ ุฑุง ฺฉูพ ฺฉูุฏ (ุจู ุฌุง YOUR_SERVER_IP ุขโูพ ุณุฑูุฑ ุฎูุฏ ุฑุง ุจููุณุฏ):

server {
    listen 80;
    server_name YOUR_SERVER_IP;

    location = /favicon.ico { access_log off; log_not_found off; }
    
    location /static/ {
        root /var/www/news_project;
    }

    location /media/ {
        root /var/www/news_project;
    }

    location / {
        include proxy_params;
        proxy_pass http://unix:/var/www/news_project/news_project.sock;
    }
}


ุฐุฎุฑู ฺฉูุฏ (Ctrl+X -> Y).

ูุนุงูโุณุงุฒ ุชูุธูุงุช:

sudo ln -s /etc/nginx/sites-available/news_project /etc/nginx/sites-enabled
sudo nginx -t  # ฺฺฉ ฺฉุฑุฏู ุงูฺฉู ุงุฑูุฑ ูุฏุงุดุชู ุจุงุดุฏ
sudo systemctl restart nginx


๐ ุชูุงู ุดุฏ!

ุญุงูุง ุงฺฏุฑ IP ุณุฑูุฑ ุฑุง ุฏุฑ ูุฑูุฑฺฏุฑ ุจุฒูุฏุ ุณุงุช ุดูุง ุจุงูุง ูโุขุฏ!

ูุญูู ุขูพุฏุช ฺฉุฑุฏู ุณุงุช ุฏุฑ ุขูุฏู:
ูุฑ ููุช ุชุบุฑ ุฏุงุฏุฏ:

ุฏุฑ ุณุณุชู ุฎูุฏุชุงู: git push

ุฏุฑ ุณุฑูุฑ:

cd /var/www/news_project
git pull
sudo systemctl restart gunicorn
